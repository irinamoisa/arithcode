<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>ArithmeticCoding: C:/Users/clackn/Desktop/src/arithcode/src/ac.c File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="C:/Users/clackn/Desktop/src/arithcode/doc/doxygen/doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">ArithmeticCoding
   &#160;<span id="projectnumber">0.0.0a</span>
   </div>
   <div id="projectbrief">Arithmetic coding in C</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">C:/Users/clackn/Desktop/src/arithcode/src/ac.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Arithmetic coding implementation.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="stream_8h_source.html">stream.h</a>&quot;</code><br/>
</div>
<p><a href="ac_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__state__t.html">_state_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Encoder/Decoder state.  <a href="struct__state__t.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#a90dc3f3ee970394e0080300526390a84">ENDL</a>&#160;&#160;&#160;&quot;\n&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#a1c1f49eefdc4ea71ebdee967d45a9615">TRY</a>(e)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#a254d91a28a2bf4873b717beec763ef84">SAFE_FREE</a>(e)&#160;&#160;&#160;if(e) { free(e); (e)=NULL; }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga111da81ae5883147168bbb8366377b10">B</a>&#160;&#160;&#160;(state-&gt;b)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaa73214aa5f2f94f63d90bb4e3d99fe53">L</a>&#160;&#160;&#160;(state-&gt;l)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac4cf4b2ab929bd23951a8676eeac086b">C</a>&#160;&#160;&#160;(state-&gt;cdf)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac179eef68bcc694aa0ef8dd1eb09950b">SHIFT</a>&#160;&#160;&#160;(state-&gt;shift)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac697c9eb2ca620ce4f6c9cd424ddfa24">NSYM</a>&#160;&#160;&#160;(state-&gt;nsym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gae7520c5477c11965aabeedc033c9862b">MASK</a>&#160;&#160;&#160;(state-&gt;mask)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaa57974323bef0262551029d83546b8e9">STREAM</a>&#160;&#160;&#160;(&amp;(state-&gt;d))</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaad9ae913bdfab20dd94ad04ee2d5b045">DATA</a>&#160;&#160;&#160;(state-&gt;d.d)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga9880ae739d412ee4be5a5df801b5a9fa">OFLOW</a>&#160;&#160;&#160;(<a class="el" href="group___arithmetic_coding.html#gaa57974323bef0262551029d83546b8e9">STREAM</a>-&gt;overflow)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga679e2182ff23d126b99996235650dca5">bitsofD</a>&#160;&#160;&#160;(8)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaf316c33cc298530f245e8b55330e86b5">D</a>&#160;&#160;&#160;(1ULL&lt;&lt;bitsofD)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga6b496b442aae24e5cb2b52663a2e93bd">LOWL</a>&#160;&#160;&#160;(state-&gt;lowl)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga892fd6d1b02ceaaed91ed789da43b83d">DEFN_UPDATE</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gae28037198a163c26285defe51accc707">DEFN_ERENORM</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga5881b9cbdb276a2eb7aa8b413ee62fe5">DEFN_ESELECT</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga1cfe16120d8a28dc571a472dfb5a4ba6">DEFN_ESTEP</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga6ad38d277fc60dfb68deeec5eb0c6160">DEFN_ENCODE</a>(TOUT, TIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga98c6b22694b0fa3e373ab19c90aa07da">DEFN_ENCODE_OUTS</a>(TIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga9a7048b05049fed9afad91aaea906a21">DEFN_DRENORM</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga91c3b0de3e30e3ba7b1de558c2ecb527">DEFN_DPRIME</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga01c6de0116a8af9959f6c044dbc55ebd">DEFN_DSTEP</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gab3e99e93ddd1fe6be130c6775c2c38e3">DEFN_DECODE</a>(TOUT, TIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga5c0372f3be048c1482d80895f0b08d6a">DEFN_DECODE_OUTS</a>(TIN)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga95a5539be051bb4486b0058ea01b8273">DEFN_VENCODE</a>(T)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga770acddd192d69997c1cf39952da3792">DEFN_VDECODE</a>(T)</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#aae41d777111baac8c6c564207c870735">u16</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct__state__t.html">_state_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Encoder/Decoder state.  <a href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga8afffa34bc664d902579d83984aa54e0">init_common</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state, <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *buf, size_t nbuf, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *cdf, size_t nsym)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A helper function that initializes the parts of the <a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> structure that do not depend on stream type.  <a href="group___arithmetic_coding.html#ga8afffa34bc664d902579d83984aa54e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaf3bfd7d3288eff27752e5bed0774727a">init_u1</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state, <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *buf, size_t nbuf, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *cdf, size_t nsym)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the state_t structure for <code>u1</code> streams.  <a href="group___arithmetic_coding.html#gaf3bfd7d3288eff27752e5bed0774727a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad8d852edbabbc5ad789ca058eed780f0">init_u4</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state, <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *buf, size_t nbuf, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *cdf, size_t nsym)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the state_t structure for <code>u4</code> streams.  <a href="group___arithmetic_coding.html#gad8d852edbabbc5ad789ca058eed780f0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac87ce74a98a7519fdde8a3e8c0569097">init_u8</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state, <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *buf, size_t nbuf, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *cdf, size_t nsym)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the state_t structure for <code>u8</code> streams.  <a href="group___arithmetic_coding.html#gac87ce74a98a7519fdde8a3e8c0569097"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga8d8060f1910409ab2f58fc39ef2905a8">init_u16</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state, <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *buf, size_t nbuf, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *cdf, size_t nsym)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the state_t structure for <code>u16</code> streams.  <a href="group___arithmetic_coding.html#ga8d8060f1910409ab2f58fc39ef2905a8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaa260fa83b6a1f5e8de7b0c97cee30fbf">free_internal</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases resources held by the state_t structure.  <a href="group___arithmetic_coding.html#gaa260fa83b6a1f5e8de7b0c97cee30fbf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga9844bcd80b112f1b9378ffd2bb596647">maximum</a> (<a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> *s, size_t n)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Array maximum.  <a href="group___arithmetic_coding.html#ga9844bcd80b112f1b9378ffd2bb596647"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga9f40c1d129b27b1cdfa4d4e6dc9c2ee5">cdf_build</a> (<a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> **cdf, size_t *M, <a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> *s, size_t N)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a cumulative distribution function (CDF) from an input u32 array.  <a href="group___arithmetic_coding.html#ga9f40c1d129b27b1cdfa4d4e6dc9c2ee5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga65be3d655fb4bb78bd3124f2ceb5b577">carry_null</a> (<a class="el" href="stream_8h.html#a71c8cb75d1db1e748a0d4b80f97a4d73">stream_t</a> *s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga747085b46fcd93b691a7c957959a23ab">push_null</a> (<a class="el" href="stream_8h.html#a71c8cb75d1db1e748a0d4b80f97a4d73">stream_t</a> *s)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gabd557748ae08998c99c98305e8d013f0">DEFN_UPDATE</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gab771ce6523ce6035d7fffa3edffaa1e2">DEFN_UPDATE</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad26c5c20ca49d8fa18222d7efb8fb8e7">DEFN_UPDATE</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga314f0508c3edc281846412369e01a171">DEFN_UPDATE</a> (null)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaaaadeb113978af7c03c78c85085b42d4">DEFN_ERENORM</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga88a65268cee6d6868c90677f8fd7e87f">DEFN_ERENORM</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaad6b68c4c078162b8450ccde61b71123">DEFN_ERENORM</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga355f54e1ab984df82e0355c4dd521707">erenorm_null</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gabd6751e07596175fcb1a9653c4d17aa2">DEFN_ESELECT</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac6ff92ff743d8de6258b2310225ec20e">DEFN_ESELECT</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gacb6b10889ae15cdbadd3d97dd366593e">DEFN_ESELECT</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga528e1a266135ffb43160706b07bf328f">DEFN_ESTEP</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga25c82d483d49283db7821b51d9de50b9">DEFN_ESTEP</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad29aa1c79770b2c550cb0dedfa437a98">DEFN_ESTEP</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga7baca5640e1ba132437e82c6f21ab1f3">DEFN_ESTEP</a> (null)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga8c73be3099d344eff5e21891b1e27bb7">DEFN_ENCODE_OUTS</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga6b9210ae0fade0f52e4ad8908dd22869">DEFN_ENCODE_OUTS</a> (<a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga9c44a706fb7e6725473b859995975eaf">DEFN_ENCODE_OUTS</a> (<a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga00d5324c1b24339e9525592b5d215659">dselect</a> (<a class="el" href="group___arithmetic_coding.html#ga18331b6247faf186c17ea75b89b30651">state_t</a> *state, <a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a> *v, int *isend)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaed51bf2661b9abd7f2f841b73390b347">DEFN_DRENORM</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga0e7e46fa36c89c32b94110ccc41dac2c">DEFN_DRENORM</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaf75292c40ca851bd96613c7829ced4c3">DEFN_DRENORM</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gae560cd8de45062bd46a262c41a27d0b1">DEFN_DPRIME</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gadb416d16fcbba643135d40e54f4b2e03">DEFN_DPRIME</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad68c8b48e1b1c1f3281c44fd338df110">DEFN_DPRIME</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac30cf898deccca48e704b4d9418d0e60">DEFN_DSTEP</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga25433d3daa0e647b1de62b52dc3591f6">DEFN_DSTEP</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac2af8e6b6490b85b219ec9e4ceecbec3">DEFN_DSTEP</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad5198cd7ba581dd6b17e837011fe66e5">DEFN_DECODE_OUTS</a> (u1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gab03680938401ddbbf594ce549d1284cb">DEFN_DECODE_OUTS</a> (u4)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad25bf26125182a02f3bd7272acf5e60a">DEFN_DECODE_OUTS</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gada70a52ae9bcd1fa8c20bbb90ffab7d7">sync</a> (<a class="el" href="stream_8h.html#a71c8cb75d1db1e748a0d4b80f97a4d73">stream_t</a> *dest, <a class="el" href="stream_8h.html#a71c8cb75d1db1e748a0d4b80f97a4d73">stream_t</a> *src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga713351984f1d009d95f9b2760a15110a">vdecode1</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> **out, size_t *nout, <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *in, size_t nin, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *cdf, size_t nsym, <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a> *tcdf, size_t tsym)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gac54adc610cfe76e578643cc131e2fa4c">DEFN_VENCODE</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga62b26a3a94c7126fc83f69be8f2c9edd">DEFN_VENCODE</a> (<a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gaacce1c2fb2a722b59c5c9deb8f12c36a">DEFN_VENCODE</a> (<a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gada682c2c90a51e246905f5b03dfdcbb7">DEFN_VDECODE</a> (<a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#gad6de9d51605c8b37338f85931efb5e1a">DEFN_VDECODE</a> (<a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___arithmetic_coding.html#ga38fbbe10dcc10ac1c75a2b736e9cb683">DEFN_VDECODE</a> (<a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a>)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Arithmetic coding implementation. </p>
<h2><a class="anchor" id="Introduction"></a>
Introduction</h2>
<p>Implementation after Amir Said's Algorithm 22-29[1].</p>
<p>Following Amir's notation,</p>
<p>D is the number of symbols in the output alphabet. P is the number of output symbols in the active block (see Eq 2.3 in [1]). Need 2P for multiplication.</p>
<p>So, have 2P*bitsof(D) = 64 (widest integer type I'll have access to)</p>
<p>The smallest codable probabililty is p = D/D^P = D^(1-P). Want to minimize p wrt constraint. Enumerating the possibilities:</p>
<div class="fragment"><pre class="fragment">
     bitsof(D)  P                D^(1-P)
     --------   --               -------
     1          32                2^-32
     8          4    (2^8)^(-3) = 2^-24
     16         2                 2^-16
     32         1                 1
   </pre></div><p>One can see there's a efficiency verses precision trade off here (higher D means less renormalizing and so better efficiency).</p>
<h2><a class="anchor" id="Notes"></a>
Notes</h2>
<ul>
<li>Need to test more!<ul>
<li>u1,u4,u16 encoding/decoding not tested</li>
<li>random sequences etc...</li>
<li>empty stream?</li>
<li>streams that generte big carries</li>
</ul>
</li>
</ul>
<ul>
<li>might be nice to add an interface that will encode chunks. That is, you feed it symbols one at a time and every once in a while, when bits get settled, it outputs some bytes. For streaming encoders, this would mean the intermediate buffer wouldn't have to be quite as big, although worst case that buffer is the size of the entire output message.</li>
</ul>
<ul>
<li>A check-symbol could be encoded in a manner similar to the END-OF-MESSAGE symbol. For example, code the symbol every 2^x symbols and assign it a probability of 2^-x. If the decoder doesn't recieve one of these at the expected interval, then there was some error. For short messages, it wouldn't require the insertion of such a symbol; only failure to show up after N symbols would indicate an error. It would take space on the interval, and so would have a negative impact on compression and minimum probability.</li>
</ul>
<h2><a class="anchor" id="References"></a>
References</h2>
<div class="fragment"><pre class="fragment">
   [1]:  Said, A. "Introduction to Arithmetic Coding - Theory and Practice."
         Hewlett Packard Laboratories Report: 2004-2076.
         www.hpl.hp.com/techreports/2004/HPL-2004-76.pdf
   </pre></div> 
<p>Definition in file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a90dc3f3ee970394e0080300526390a84"></a><!-- doxytag: member="ac.c::ENDL" ref="a90dc3f3ee970394e0080300526390a84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="test_8c.html#a90dc3f3ee970394e0080300526390a84">ENDL</a>&#160;&#160;&#160;&quot;\n&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00230">230</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a254d91a28a2bf4873b717beec763ef84"></a><!-- doxytag: member="ac.c::SAFE_FREE" ref="a254d91a28a2bf4873b717beec763ef84" args="(e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="stream_8c.html#a254d91a28a2bf4873b717beec763ef84">SAFE_FREE</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e</td><td>)</td>
          <td>&#160;&#160;&#160;if(e) { free(e); (e)=NULL; }</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00238">238</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1c1f49eefdc4ea71ebdee967d45a9615"></a><!-- doxytag: member="ac.c::TRY" ref="a1c1f49eefdc4ea71ebdee967d45a9615" args="(e)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="stream_8c.html#a1c1f49eefdc4ea71ebdee967d45a9615">TRY</a></td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">e</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">do</span>{ <span class="keywordflow">if</span>(!(e)) {\
    printf(<span class="stringliteral">&quot;%s(%d):&quot;</span><a class="code" href="ac_8c.html#a90dc3f3ee970394e0080300526390a84">ENDL</a> <span class="stringliteral">&quot;\t%s&quot;</span><a class="code" href="ac_8c.html#a90dc3f3ee970394e0080300526390a84">ENDL</a> <span class="stringliteral">&quot;\tExpression evaluated as false.&quot;</span><a class="code" href="ac_8c.html#a90dc3f3ee970394e0080300526390a84">ENDL</a>, \
        __FILE__,__LINE__,#e); \
    goto Error; \
  }} <span class="keywordflow">while</span>(0)
</pre></div>
<p>Definition at line <a class="el" href="ac_8c_source.html#l00231">231</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a031f8951175b43076c2084a6c2173410"></a><!-- doxytag: member="ac.c::real" ref="a031f8951175b43076c2084a6c2173410" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef float <a class="el" href="ac_8c.html#a031f8951175b43076c2084a6c2173410">real</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00228">228</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aae41d777111baac8c6c564207c870735"></a><!-- doxytag: member="ac.c::u16" ref="aae41d777111baac8c6c564207c870735" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="ac_8c.html#aae41d777111baac8c6c564207c870735">u16</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00225">225</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<a class="anchor" id="afaa62991928fb9fb18ff0db62a040aba"></a><!-- doxytag: member="ac.c::u32" ref="afaa62991928fb9fb18ff0db62a040aba" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="ac_8c.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00226">226</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a3f7e2bcbb0b4c338f3c4f6c937cd4234"></a><!-- doxytag: member="ac.c::u64" ref="a3f7e2bcbb0b4c338f3c4f6c937cd4234" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint64_t <a class="el" href="ac_8c.html#a3f7e2bcbb0b4c338f3c4f6c937cd4234">u64</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00227">227</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a92c50087ca0e64fa93fc59402c55f8ca"></a><!-- doxytag: member="ac.c::u8" ref="a92c50087ca0e64fa93fc59402c55f8ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint8_t <a class="el" href="ac_8c.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="ac_8c_source.html#l00224">224</a> of file <a class="el" href="ac_8c_source.html">ac.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 23 2012 17:48:32 for ArithmeticCoding by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
